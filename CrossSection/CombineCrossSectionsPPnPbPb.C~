using namespace std;
#include "uti.h"
#include "parameters.h"
#include "TLegendEntry.h"
#include "systematics.h"

void CombineCrossSectionsPPnPbPb(TString filePPMB, TString filePP, TString filePbPb0100MB, TString filePbPb0100, TString filePbPb010MB, TString filePbPb010)
{

  gStyle->SetOptTitle(0);
  gStyle->SetOptStat(0);
  gStyle->SetEndErrorSize(0);
  gStyle->SetMarkerStyle(20);

  TFile* infilePPMB = new TFile(filePPMB.Data());  
  TGraphAsymmErrors* gaeRatioCrossFONLLstatMB = (TGraphAsymmErrors*)infilePPMB->Get("gaeRatioCrossFONLLstat");
  TGraphAsymmErrors* gaeRatioCrossFONLLsystMB = (TGraphAsymmErrors*)infilePPMB->Get("gaeRatioCrossFONLLsyst");
  TGraphAsymmErrors* gaeBplusReferenceMB = (TGraphAsymmErrors*)infilePPMB->Get("gaeSigmaDzero");
  TGraphAsymmErrors* gaeRatioCrossFONLLunityMB = (TGraphAsymmErrors*)infilePPMB->Get("gaeRatioCrossFONLLunity");

  TGraphAsymmErrors* gaeCrossPPSystMB = (TGraphAsymmErrors*)infilePPMB->Get("gaeCrossSyst");
  gaeCrossPPSystMB->SetName("gaeCrossPPSystMB");
  TH1D* hSigmaPPStatMB = (TH1D*)infilePPMB->Get("hPtSigma");
  hSigmaPPStatMB->SetName("hSigmaPPStatMB");
  TFile* infilePbPb0100MB = new TFile(filePbPb0100MB.Data());  
  TGraphAsymmErrors* gaeCrossPbPb0100SystMB = (TGraphAsymmErrors*)infilePbPb0100MB->Get("gaeCrossSyst");
  gaeCrossPbPb0100SystMB->SetName("gaeCrossPbPb0100SystMB");
  TH1D* hSigmaPbPb0100StatMB = (TH1D*)infilePbPb0100MB->Get("hPtSigma");
  hSigmaPbPb0100StatMB->SetName("hSigmaPbPb0100StatMB");
  TFile* infilePbPb010MB = new TFile(filePbPb010MB.Data());  
  TGraphAsymmErrors* gaeCrossPbPb010SystMB = (TGraphAsymmErrors*)infilePbPb010MB->Get("gaeCrossSyst");
  gaeCrossPbPb010SystMB->SetName("gaeCrossPbPb010SystMB");
  TH1D* hSigmaPbPb010StatMB = (TH1D*)infilePbPb010MB->Get("hPtSigma");
  hSigmaPbPb010StatMB->SetName("hSigmaPbPb010StatMB");

  TFile* infilePP = new TFile(filePP.Data());  
  TGraphAsymmErrors* gaeRatioCrossFONLLstat = (TGraphAsymmErrors*)infilePP->Get("gaeRatioCrossFONLLstat");
  TGraphAsymmErrors* gaeRatioCrossFONLLsyst = (TGraphAsymmErrors*)infilePP->Get("gaeRatioCrossFONLLsyst");
  TGraphAsymmErrors* gaeBplusReference = (TGraphAsymmErrors*)infilePP->Get("gaeSigmaDzero");
  TGraphAsymmErrors* gaeRatioCrossFONLLunity = (TGraphAsymmErrors*)infilePP->Get("gaeRatioCrossFONLLunity");

  TGraphAsymmErrors* gaeCrossPPSyst = (TGraphAsymmErrors*)infilePP->Get("gaeCrossSyst");
  gaeCrossPPSyst->SetName("gaeCrossPPSyst");
  TH1D* hSigmaPPStat = (TH1D*)infilePP->Get("hPtSigma");
  hSigmaPPStat->SetName("hSigmaPPStat");
  TFile* infilePbPb0100 = new TFile(filePbPb0100.Data());  
  TGraphAsymmErrors* gaeCrossPbPb0100Syst = (TGraphAsymmErrors*)infilePbPb0100->Get("gaeCrossSyst");
  gaeCrossPbPb0100Syst->SetName("gaeCrossPbPb0100Syst");
  TH1D* hSigmaPbPb0100Stat = (TH1D*)infilePbPb0100->Get("hPtSigma");
  hSigmaPbPb0100Stat->SetName("hSigmaPbPb0100Stat");
  TFile* infilePbPb010 = new TFile(filePbPb010.Data());  
  TGraphAsymmErrors* gaeCrossPbPb010Syst = (TGraphAsymmErrors*)infilePbPb010->Get("gaeCrossSyst");
  gaeCrossPbPb010Syst->SetName("gaeCrossPbPb010Syst");
  TH1D* hSigmaPbPb010Stat = (TH1D*)infilePbPb010->Get("hPtSigma");
  hSigmaPbPb010Stat->SetName("hSigmaPbPb010Stat");

  // FONLL
  gaeBplusReferenceMB->SetFillColor(5);//2
  gaeBplusReferenceMB->SetFillStyle(1001);//3001 
  gaeBplusReferenceMB->SetLineWidth(1);//3
  gaeBplusReferenceMB->SetLineColor(4);//2
  gaeBplusReference->SetFillColor(5);//2
  gaeBplusReference->SetFillStyle(1001);//3001 
  gaeBplusReference->SetLineWidth(1);//3
  gaeBplusReference->SetLineColor(4);//2

  gaeRatioCrossFONLLunityMB->SetFillColor(5);
  gaeRatioCrossFONLLunityMB->SetFillStyle(1001);
  gaeRatioCrossFONLLunityMB->SetLineWidth(1);
  gaeRatioCrossFONLLunityMB->SetLineColor(4);
  
  gaeRatioCrossFONLLstatMB->SetMarkerSize(1);
  gaeRatioCrossFONLLstatMB->SetLineWidth(2);
  gaeRatioCrossFONLLstatMB->SetLineColor(1);//kGreen+4 
  gaeRatioCrossFONLLstatMB->SetMarkerColor(1);//kGreen+4
  
  gaeRatioCrossFONLLsystMB->SetLineWidth(3);
  gaeRatioCrossFONLLsystMB->SetLineColor(1);//kGreen+4

  gaeRatioCrossFONLLunity->SetFillColor(5);
  gaeRatioCrossFONLLunity->SetFillStyle(1001);
  gaeRatioCrossFONLLunity->SetLineWidth(1);
  gaeRatioCrossFONLLunity->SetLineColor(4);

  gaeRatioCrossFONLLstat->SetMarkerSize(1);
  gaeRatioCrossFONLLstat->SetLineWidth(2);
  gaeRatioCrossFONLLstat->SetLineColor(1);//kGreen+4
  gaeRatioCrossFONLLstat->SetMarkerColor(1);//kGreen+4

  gaeRatioCrossFONLLsyst->SetLineWidth(3);
  gaeRatioCrossFONLLsyst->SetLineColor(1);//kGreen+4

  // data
  hSigmaPPStatMB->SetLineWidth(2);
  hSigmaPPStatMB->SetMarkerSize(1);//4
  hSigmaPPStatMB->SetMarkerStyle(20);
  hSigmaPPStatMB->SetLineColor(1);//kGreen+4
  hSigmaPPStatMB->SetMarkerColor(1);//kGreen+4

  hSigmaPPStat->SetLineWidth(2);
  hSigmaPPStat->SetMarkerSize(1);//4
  hSigmaPPStat->SetMarkerStyle(20);
  hSigmaPPStat->SetLineColor(1);//kGreen+4
  hSigmaPPStat->SetMarkerColor(1);//kGreen+4

  gaeCrossPPSystMB->SetFillColor(1);
  gaeCrossPPSystMB->SetFillStyle(0); 
  gaeCrossPPSystMB->SetLineWidth(2);
  gaeCrossPPSystMB->SetLineColor(1);//kGreen+4

  gaeCrossPPSyst->SetFillColor(1);
  gaeCrossPPSyst->SetFillStyle(0); 
  gaeCrossPPSyst->SetLineWidth(2);
  gaeCrossPPSyst->SetLineColor(1);//kGreen+4

  // PbPb 0-100%
  hSigmaPbPb0100StatMB->SetLineWidth(2);
  hSigmaPbPb0100StatMB->SetMarkerSize(1);//4
  hSigmaPbPb0100StatMB->SetMarkerStyle(20);
  hSigmaPbPb0100StatMB->SetLineColor(kRed+1);
  hSigmaPbPb0100StatMB->SetMarkerColor(kRed+1);

  hSigmaPbPb0100Stat->SetLineWidth(2);
  hSigmaPbPb0100Stat->SetMarkerSize(1);//4
  hSigmaPbPb0100Stat->SetMarkerStyle(20);
  hSigmaPbPb0100Stat->SetLineColor(kRed+1);
  hSigmaPbPb0100Stat->SetMarkerColor(kRed+1);

  gaeCrossPbPb0100SystMB->SetFillColor(1);
  gaeCrossPbPb0100SystMB->SetFillStyle(0); 
  gaeCrossPbPb0100SystMB->SetLineWidth(2);
  gaeCrossPbPb0100SystMB->SetLineColor(kRed+1);

  gaeCrossPbPb0100Syst->SetFillColor(1);
  gaeCrossPbPb0100Syst->SetFillStyle(0); 
  gaeCrossPbPb0100Syst->SetLineWidth(2);
  gaeCrossPbPb0100Syst->SetLineColor(kRed+1);

  // PbPb 0-10%
  hSigmaPbPb010StatMB->SetLineWidth(2);
  hSigmaPbPb010StatMB->SetMarkerSize(1);//4
  hSigmaPbPb010StatMB->SetMarkerStyle(20);
  hSigmaPbPb010StatMB->SetLineColor(kAzure-1);
  hSigmaPbPb010StatMB->SetMarkerColor(kAzure-1);

  hSigmaPbPb010Stat->SetLineWidth(2);
  hSigmaPbPb010Stat->SetMarkerSize(1);//4
  hSigmaPbPb010Stat->SetMarkerStyle(20);
  hSigmaPbPb010Stat->SetLineColor(kAzure-1);
  hSigmaPbPb010Stat->SetMarkerColor(kAzure-1);

  gaeCrossPbPb010SystMB->SetFillColor(1);
  gaeCrossPbPb010SystMB->SetFillStyle(0); 
  gaeCrossPbPb010SystMB->SetLineWidth(2);
  gaeCrossPbPb010SystMB->SetLineColor(kAzure-1);

  gaeCrossPbPb010Syst->SetFillColor(1);
  gaeCrossPbPb010Syst->SetFillStyle(0); 
  gaeCrossPbPb010Syst->SetLineWidth(2);
  gaeCrossPbPb010Syst->SetLineColor(kAzure-1);

  //

  TH2F* hemptySigmaOnly = new TH2F("hemptySigmaOnly","",50,0.,110.,10.,1.1,1.e10);  
  hemptySigmaOnly->GetXaxis()->CenterTitle();
  hemptySigmaOnly->GetYaxis()->CenterTitle();
  hemptySigmaOnly->GetXaxis()->SetTitle("p_{T} (GeV/c)");
  //hemptySigmaOnly->GetYaxis()->SetTitle("d#sigma / dp_{T}( pb GeV^{-1}c)");
  hemptySigmaOnly->GetYaxis()->SetTitle("1/T_{AA} * dN / dp_{T}( pb GeV^{-1}c)");
  hemptySigmaOnly->GetXaxis()->SetTitleOffset(1.0);
  hemptySigmaOnly->GetYaxis()->SetTitleOffset(1.286);//1.3
  hemptySigmaOnly->GetXaxis()->SetTitleSize(0.039);
  hemptySigmaOnly->GetYaxis()->SetTitleSize(0.0385);
  hemptySigmaOnly->GetXaxis()->SetTitleFont(42);
  hemptySigmaOnly->GetYaxis()->SetTitleFont(42);
  hemptySigmaOnly->GetXaxis()->SetLabelFont(42);
  hemptySigmaOnly->GetYaxis()->SetLabelFont(42);
  hemptySigmaOnly->GetXaxis()->SetLabelSize(0.03);
  hemptySigmaOnly->GetYaxis()->SetLabelSize(0.0315);  
  hemptySigmaOnly->GetXaxis()->SetLabelOffset(0.001);
  hemptySigmaOnly->SetMaximum(2);
  hemptySigmaOnly->SetMinimum(0.);

  //
  TH2F* hemptySigma = new TH2F("hemptySigma","",50,0.,110.,10.,1.1,1.e10);  
  hemptySigma->GetXaxis()->CenterTitle();
  hemptySigma->GetYaxis()->CenterTitle();
  hemptySigma->GetYaxis()->SetTitle("d#sigma / dp_{T}( pb GeV^{-1}c)");
  //if(isPbPb==1) hemptySigma->GetYaxis()->SetTitle("1/T_{AA} * dN / dp_{T}( pb GeV^{-1}c)");
  hemptySigma->GetXaxis()->SetTitleOffset(0.7);
  hemptySigma->GetYaxis()->SetTitleOffset(0.9);//1.3
  hemptySigma->GetXaxis()->SetTitleSize(0.05);
  hemptySigma->GetYaxis()->SetTitleSize(0.055);
  hemptySigma->GetXaxis()->SetTitleFont(42);
  hemptySigma->GetYaxis()->SetTitleFont(42);
  hemptySigma->GetXaxis()->SetLabelFont(42);
  hemptySigma->GetYaxis()->SetLabelFont(42);
  hemptySigma->GetXaxis()->SetLabelSize(0.04);
  hemptySigma->GetYaxis()->SetLabelSize(0.045);  
  hemptySigma->SetMaximum(2);
  hemptySigma->SetMinimum(0.);

  TH2F* hemptyRatio = new TH2F("hemptyRatio","",50,0.,110.,10.,0.,2.7);//50,0.,110.,10.,0.,4
  hemptyRatio->GetXaxis()->SetTitle("p_{T} (GeV/c)");
  hemptyRatio->GetXaxis()->CenterTitle();
  hemptyRatio->GetYaxis()->CenterTitle();
  hemptyRatio->GetYaxis()->SetTitle("pp / FONLL");
  hemptyRatio->GetXaxis()->SetTitleOffset(1.0);//0.9
  hemptyRatio->GetYaxis()->SetTitleOffset(0.4);//0.5
  hemptyRatio->GetXaxis()->SetTitleSize(0.13);//0.12
  hemptyRatio->GetYaxis()->SetTitleSize(0.12);
  hemptyRatio->GetXaxis()->SetTitleFont(42);
  hemptyRatio->GetYaxis()->SetTitleFont(42);
  hemptyRatio->GetXaxis()->SetLabelFont(42);
  hemptyRatio->GetYaxis()->SetLabelFont(42);
  hemptyRatio->GetYaxis()->SetLabelOffset(0.015);
  hemptyRatio->GetXaxis()->SetLabelSize(0.1);
  hemptyRatio->GetYaxis()->SetLabelSize(0.1);  

  TString texper="%";
  /*
  TLatex* texCent = new TLatex(0.55,0.85,Form("Centrality %.0f - %.0f%s",centMin,centMax,texper.Data()));
  texCent->SetNDC();
  texCent->SetTextFont(42);
  texCent->SetTextSize(0.045);
  TLatex* texCentOnly = new TLatex(0.55,0.895,Form("Centrality %.0f - %.0f%s",centMin,centMax,texper.Data()));
  texCentOnly->SetNDC();
  texCentOnly->SetTextFont(42);
  texCentOnly->SetTextSize(0.0315);
  */

  TLatex* texY = new TLatex(0.55,0.85,"|y| < 1.0, Global uncert.");
  texY->SetNDC();
  texY->SetTextFont(42);
  texY->SetTextSize(0.045);
  texY->SetLineWidth(2);
  TLatex* texYOnly = new TLatex(0.55,0.853,"|y| < 1.0");
  texYOnly->SetNDC();
  texYOnly->SetTextFont(42);
  texYOnly->SetTextSize(0.0315);
  texYOnly->SetLineWidth(2);

  Float_t systnormPP = normalizationUncertaintyForPP();
  Float_t systnormPbPb0100 = normalizationUncertaintyForPbPb(0,100);
  Float_t systnormPbPb010 = normalizationUncertaintyForPbPb(0,10);
  TLatex* texSystnormPP = new TLatex(0.23,0.55,Form("Global uncert. (pp) %.1f%s",systnormPP,texper.Data()));
  texSystnormPP->SetNDC();
  texSystnormPP->SetTextFont(42);
  texSystnormPP->SetTextSize(0.045);
  texSystnormPP->SetLineWidth(2);
  TLatex* texSystnormPbPb0100 = new TLatex(0.23,0.495,Form("Global uncert. (PbPb 0-100%s) %.1f%s",systnormPbPb0100,texper.Data(),texper.Data()));
  texSystnormPbPb0100->SetNDC();
  texSystnormPbPb0100->SetTextFont(42);
  texSystnormPbPb0100->SetTextSize(0.045);
  texSystnormPbPb0100->SetLineWidth(2);
  TLatex* texSystnormPbPb010 = new TLatex(0.23,0.44,Form("Global uncert. (PbPb 0-10%s) %.1f%s",systnormPbPb010,texper.Data(),texper.Data()));
  texSystnormPbPb010->SetNDC();
  texSystnormPbPb010->SetTextFont(42);
  texSystnormPbPb010->SetTextSize(0.045);
  texSystnormPbPb010->SetLineWidth(2);

  TLatex* texSystnormPbPb0100Only = new TLatex(0.55,0.727,Form("Global uncert. (0-100%s) %.1f%s",texper.Data(),systnormPbPb0100,texper.Data()));
  texSystnormPbPb0100Only->SetNDC();
  texSystnormPbPb0100Only->SetTextFont(42);
  texSystnormPbPb0100Only->SetTextSize(0.0315);
  texSystnormPbPb0100Only->SetLineWidth(2);
  TLatex* texSystnormPbPb010Only = new TLatex(0.55,0.6885,Form("Global uncert. (0-10%s) %.1f%s",texper.Data(),systnormPbPb010,texper.Data()));
  texSystnormPbPb010Only->SetNDC();
  texSystnormPbPb010Only->SetTextFont(42);
  texSystnormPbPb010Only->SetTextSize(0.0315);
  texSystnormPbPb010Only->SetLineWidth(2);

  TLegend* legendSigma = new TLegend(0.54,0.61,0.87,0.83,"");//0.5100806,0.5868644,0.8084677,0.7605932
  legendSigma->SetBorderSize(0);
  legendSigma->SetLineColor(0);
  legendSigma->SetFillColor(0);
  legendSigma->SetFillStyle(1001);
  legendSigma->SetTextFont(42);
  legendSigma->SetTextSize(0.045);
  TLegendEntry* ent_SigmaPPMB = legendSigma->AddEntry(hSigmaPPStatMB,Form("pp, %.1f%s",systnormPP,texper.Data()),"pf");
  ent_SigmaPPMB->SetTextFont(42);
  ent_SigmaPPMB->SetLineColor(2);
  ent_SigmaPPMB->SetMarkerColor(2);
  TLegendEntry* ent_SigmaPbPb0100MB = legendSigma->AddEntry(hSigmaPbPb0100StatMB,Form("PbPb Cent. 0-100%s, %.1f%s",texper.Data(),systnormPbPb0100,texper.Data()),"pf");
  ent_SigmaPbPb0100MB->SetTextFont(42);
  ent_SigmaPbPb0100MB->SetLineColor(2);
  ent_SigmaPbPb0100MB->SetMarkerColor(2);
  TLegendEntry* ent_SigmaPbPb010MB = legendSigma->AddEntry(hSigmaPbPb010StatMB,Form("PbPb Cent. 0-10%s, %.1f%s",texper.Data(),systnormPbPb010,texper.Data()),"pf");
  ent_SigmaPbPb010MB->SetTextFont(42);
  ent_SigmaPbPb010MB->SetLineColor(2);
  ent_SigmaPbPb010MB->SetMarkerColor(2);
  TLegendEntry* ent_SigmaFONLL = legendSigma->AddEntry(gaeBplusReferenceMB,"FONLL pp ref.","f");
  ent_SigmaFONLL->SetTextFont(42);
  ent_SigmaFONLL->SetLineColor(5);
  ent_SigmaFONLL->SetMarkerColor(1);
  TLegend* legendSigmaOnly = new TLegend(0.54,0.762,0.87,0.839,"");//0.5100806,0.5868644,0.8084677,0.7605932
  legendSigmaOnly->SetBorderSize(0);
  legendSigmaOnly->SetLineColor(0);
  legendSigmaOnly->SetFillColor(0);
  legendSigmaOnly->SetFillStyle(1001);
  legendSigmaOnly->SetTextFont(42);
  legendSigmaOnly->SetTextSize(0.0315);
  TLegendEntry* ent_SigmaOnlyPbPb0100MB = legendSigmaOnly->AddEntry(hSigmaPbPb0100StatMB,Form("Cent. 0-100%s",texper.Data()),"pf");
  ent_SigmaOnlyPbPb0100MB->SetTextFont(42);
  ent_SigmaOnlyPbPb0100MB->SetLineColor(2);
  ent_SigmaOnlyPbPb0100MB->SetMarkerColor(2);
  TLegendEntry* ent_SigmaOnlyPbPb010MB = legendSigmaOnly->AddEntry(hSigmaPbPb010StatMB,Form("Cent. 0-10%s",texper.Data()),"pf");
  ent_SigmaOnlyPbPb010MB->SetTextFont(42);
  ent_SigmaOnlyPbPb010MB->SetLineColor(2);
  ent_SigmaOnlyPbPb010MB->SetMarkerColor(2);

  
  TString tlumi = "27.4 pb^{-1} (5.02 TeV pp) + 530 #mub^{-1} (5.02 TeV PbPb)";
  TLatex* tlatex1 = new TLatex(0.95,0.96,tlumi.Data());
  tlatex1->SetNDC();
  tlatex1->SetTextAlign(32);
  tlatex1->SetTextColor(1);
  tlatex1->SetTextFont(42);
  tlatex1->SetTextSize(0.045);
  TLatex* tlatex1Only = new TLatex(0.95,0.972,tlumi.Data());
  tlatex1Only->SetNDC();
  tlatex1Only->SetTextAlign(32);
  tlatex1Only->SetTextColor(1);
  tlatex1Only->SetTextFont(42);
  tlatex1Only->SetTextSize(0.0315);

  TLatex* texcms = new TLatex(0.15,0.90,"CMS");
  texcms->SetNDC();
  texcms->SetTextAlign(13);
  texcms->SetTextFont(62);//61
  texcms->SetTextSize(0.06);
  texcms->SetLineWidth(2);
  TLatex* texcmsOnly = new TLatex(0.15,0.93,"CMS");
  texcmsOnly->SetNDC();
  texcmsOnly->SetTextAlign(13);
  texcmsOnly->SetTextFont(62);//61
  texcmsOnly->SetTextSize(0.042);
  texcmsOnly->SetLineWidth(2);
  TLatex* texpre = new TLatex(0.15,0.84,"Preliminary");
  texpre->SetNDC();
  texpre->SetTextAlign(13);
  texpre->SetTextFont(52);
  texpre->SetTextSize(0.04);
  texpre->SetLineWidth(2);
  TLatex* texpreOnly = new TLatex(0.15,0.888,"Preliminary");
  texpreOnly->SetNDC();
  texpreOnly->SetTextAlign(13);
  texpreOnly->SetTextFont(52);
  texpreOnly->SetTextSize(0.028);
  texpreOnly->SetLineWidth(2);

  TLine* l = new TLine(2.2,1,110,1);//10,1,105,1
  l->SetLineWidth(1);
  l->SetLineStyle(2);

  TCanvas* cSigmaOnly = new TCanvas("cSigmaOnly","",750,750);
  cSigmaOnly->SetFrameBorderMode(0);
  cSigmaOnly->SetFrameBorderMode(0);
  cSigmaOnly->Range(-1.989924,-0.2917772,25.49622,2.212202);
  cSigmaOnly->SetFillColor(0);
  cSigmaOnly->SetBorderMode(0);
  cSigmaOnly->SetBorderSize(2);
  cSigmaOnly->SetLeftMargin(0.12);//0.1451613
  cSigmaOnly->SetRightMargin(0.03);//0.05443548
  cSigmaOnly->SetTopMargin(0.049);//0.08474576
  cSigmaOnly->SetBottomMargin(0.099);//0.1165254
  cSigmaOnly->SetFrameBorderMode(0);
  cSigmaOnly->SetFrameBorderMode(0);
  cSigmaOnly->SetLogx();
  cSigmaOnly->SetLogy();
  cSigmaOnly->cd();

  hemptySigmaOnly->Draw();
  hSigmaPbPb0100StatMB->Draw("epsame"); 
  hSigmaPbPb0100Stat->Draw("epsame"); 
  gaeCrossPbPb0100SystMB->Draw("5same");  
  gaeCrossPbPb0100Syst->Draw("5same");  
  hSigmaPbPb010StatMB->Draw("epsame"); 
  hSigmaPbPb010Stat->Draw("epsame"); 
  gaeCrossPbPb010SystMB->Draw("5same");  
  gaeCrossPbPb010Syst->Draw("5same");  
  texYOnly->Draw();
  texSystnormPbPb0100Only->Draw();
  texSystnormPbPb010Only->Draw();
  legendSigmaOnly->Draw("same");
  tlatex1Only->Draw();
  texcmsOnly->Draw();
  //texpreOnly->Draw();

  cSigmaOnly->SaveAs("plotCrossSection/CrossSection_ComparisonPbPb.pdf");

  TCanvas* cSigma = new TCanvas("cSigma","",750,750);
  cSigma->SetFrameBorderMode(0);
  cSigma->SetFrameBorderMode(0);
  cSigma->Range(-1.989924,-0.2917772,25.49622,2.212202);
  cSigma->SetFillColor(0);
  cSigma->SetBorderMode(0);
  cSigma->SetBorderSize(2);
  cSigma->SetLeftMargin(0.12);//0.1451613
  cSigma->SetRightMargin(0.03);//0.05443548
  cSigma->SetTopMargin(0.07);//0.08474576
  cSigma->SetBottomMargin(0.15);//0.1165254
  cSigma->SetFrameBorderMode(0);
  cSigma->SetFrameBorderMode(0);
  cSigma->SetLogx();
  cSigma->cd();
  TPad* pSigma = new TPad("pSigma","",0,0.30,1,1);
  pSigma->SetFillColor(0);
  pSigma->SetBorderMode(0);
  pSigma->SetBorderSize(2);
  pSigma->SetLeftMargin(0.12);//0.1451613
  pSigma->SetRightMargin(0.03);//0.05443548
  pSigma->SetTopMargin(0.07);//0.08474576
  pSigma->SetBottomMargin(0);
  pSigma->SetLogy();
  pSigma->SetLogx();
  pSigma->Draw();
  pSigma->cd();

  hemptySigma->Draw();
  gaeBplusReferenceMB->Draw("5same");
  gaeBplusReference->Draw("5same");
  hSigmaPPStatMB->Draw("epsame"); 
  hSigmaPPStat->Draw("epsame"); 
  gaeCrossPPSystMB->Draw("5same");  
  gaeCrossPPSyst->Draw("5same");  
  hSigmaPbPb0100StatMB->Draw("epsame"); 
  hSigmaPbPb0100Stat->Draw("epsame"); 
  gaeCrossPbPb0100SystMB->Draw("5same");  
  gaeCrossPbPb0100Syst->Draw("5same");  
  hSigmaPbPb010StatMB->Draw("epsame"); 
  hSigmaPbPb010Stat->Draw("epsame"); 
  gaeCrossPbPb010SystMB->Draw("5same");  
  gaeCrossPbPb010Syst->Draw("5same");  

  texY->Draw();
  //texSystnormPP->Draw();
  //texSystnormPbPb0100->Draw();
  //texSystnormPbPb010->Draw();
  legendSigma->Draw("same");
  tlatex1->Draw();
  texcms->Draw();
  //texpre->Draw();

  cSigma->cd();
  TPad* pRatio = new TPad("pRatio","",0,0,1,0.30);
  pRatio->SetLeftMargin(0.12);//0.1451613
  pRatio->SetRightMargin(0.03);//0.05443548
  pRatio->SetTopMargin(0);
  pRatio->SetBottomMargin(0.33);//0.25
  pRatio->SetLogx();
  pRatio->Draw();
  pRatio->cd();

  hemptyRatio->Draw();
  gaeRatioCrossFONLLunityMB->Draw("5same");
  gaeRatioCrossFONLLstatMB->Draw("epsame");
  gaeRatioCrossFONLLsystMB->Draw("5same");
  gaeRatioCrossFONLLunity->Draw("5same");
  gaeRatioCrossFONLLstat->Draw("epsame");
  gaeRatioCrossFONLLsyst->Draw("5same");
  l->Draw("same");

  cSigma->SaveAs("plotCrossSection/CrossSection_ComparisonPPnPbPb.pdf");
}


int main(int argc, char *argv[])
{
  if(argc==7)
    {
      CombineCrossSectionsPPnPbPb(argv[1], argv[2], argv[3], argv[4], argv[5], argv[6]);
      return 0;
    }
  else
    {
      std::cout << "Wrong number of inputs" << std::endl;
      return 1;
    }
}

